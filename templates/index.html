{% extends "base.html" %}
{% block title %}Create a Reel{% endblock %}

{% block content %}
<div class="grid gap-6">

  <section class="rounded-2xl bg-white shadow p-6"
           x-data="{ type: 'photo' }">
    <h1 class="text-xl font-semibold mb-4">Tweet to Reel</h1>

    {% if error %}
      <div class="mb-4 text-sm text-red-700 bg-red-50 border border-red-200 rounded-lg p-3">
        {{ error }}
      </div>
    {% endif %}

    <form id="tweetForm"
          class="grid gap-4"
          hx-post="/"
          hx-target="#job-panel"
          hx-swap="innerHTML">

      <label class="grid gap-1">
        <span class="text-sm font-medium">Tweet/X URL</span>
        <input name="url" type="url" placeholder="https://x.com/..." required
               class="border rounded-lg px-3 py-2 outline-none focus:ring w-full" />
      </label>

      <fieldset class="grid gap-2">
        <legend class="text-sm font-medium">Output type</legend>
        <div class="flex gap-6 items-center">
          <label class="flex items-center gap-2">
            <input type="radio" name="type" value="photo" x-model="type" checked />
            <span>Photo</span>
          </label>
          <label class="flex items-center gap-2">
            <input type="radio" name="type" value="video" x-model="type" />
            <span>Video</span>
          </label>
        </div>
      </fieldset>

      <div id="videoOptions" x-cloak x-show="type==='video'" class="grid gap-4">
        <label class="grid gap-1">
          <span class="text-sm font-medium">Layout</span>
          <select class="border rounded-lg px-3 py-2" name="layout">
            <option value="video_bottom">Video bottom – image top</option>
            <option value="video_top" selected>Video top – image bottom</option>
          </select>
        </label>

        <label class="grid gap-1">
          <span class="text-sm font-medium">Background</span>
          <select class="border rounded-lg px-3 py-2" name="background">
            <option value="white">White</option>
            <option value="blur">Blur</option>
          </select>
        </label>

        <label class="flex items-center gap-2">
          <input class="h-4 w-4" type="checkbox" id="cropVideo" name="cropped" value="1">
          <span class="text-sm">Crop video to 1:1 before stacking</span>
        </label>
      </div>

      <div class="flex gap-3 items-center">
        <button type="submit" class="px-4 py-2 rounded-lg bg-black text-white">Generate</button>
        <div id="form-status" class="text-sm text-gray-500"></div>
      </div>
    </form>
  </section>

  <section id="job-panel" class="rounded-2xl bg-white shadow p-6 hidden"></section>
</div>
{% endblock %}
